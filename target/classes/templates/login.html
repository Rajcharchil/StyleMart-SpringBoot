<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/signup.js" defer></script>
</head>
<body>
<body>
    <section>
        
        <form action="/login" method="post">
            <h1>Login</h1>
            <div id="login-message" class="dialog-row"></div>
            <div class="dialog-row">
                <label th:if="${param.error}" th:text="${session['SPRING_SECURITY_LAST_EXCEPTION'].message}" class="text-center redText"></label>                   
            </div>
            <div class="inputbox">
                <ion-icon name="email-outline"></ion-icon>
                <input name="username" id="username"type="name" required>
                <label for="">username</label>
            </div>
            <div class="inputbox">
                <!-- <ion-icon name="lock-closed-outline"></ion-icon> -->
                <input name="password" type="password" id="password" required>
                <label for="">Password</label>
                <span class="toggle-password" onclick="togglePassword('password', this)">
                  <ion-icon name="eye-off-outline"></ion-icon>
                </span>
            </div>
            <div class="register">
                <p><a href="#">Forget Password ?</a></p>
            </div>
            <button>Log in</button>
            <div class="register">
                <p>Don't have a account ?<a href="/req/signup"> Register!!</a></p>
            </div>
        </form>
    </section>
</body>
<script>
  // Show login success message if ?loginSuccess is in URL
  if(window.location.search.includes('loginSuccess')) {
    document.getElementById('login-message').innerText = 'Login successful!';
    document.getElementById('login-message').style.color = 'green';
  }

  function togglePassword(inputId, iconSpan) {
    const input = document.getElementById(inputId);
    const icon = iconSpan.querySelector('ion-icon');
    if (input.type === 'password') {
      input.type = 'text';
      icon.setAttribute('name', 'eye-outline');
    } else {
      input.type = 'password';
      icon.setAttribute('name', 'eye-off-outline');
    }
  }
</script>
  